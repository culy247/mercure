# Learn how to configure the Mercure.rocks Hub on https://mercure.rocks/docs/hub/config
{
    servers {
        protocol {
            experimental_http3
        }
    }
}

#{$SERVER_NAME:localhost}
:4000
log

route {
    redir / /.well-known/mercure/ui/
    encode zstd gzip

    mercure {
        # Transport to use (default to Bolt)
        #transport_url redis://127.0.0.1:6379/0
        #transport_url bolt://abc.db
        # Publisher JWT key
        publisher_jwt !ChangeMe!
        # Subscriber JWT key
        subscriber_jwt !ChangeMe!
        # Permissive configuration for the development environment
        cors_origins *
        publish_origins *
        anonymous
        demo
        subscriptions
        # Extra directives
        {$MERCURE_EXTRA_DIRECTIVES}
    }
    respond /healthz 200
    respond "Not Found" 404
}